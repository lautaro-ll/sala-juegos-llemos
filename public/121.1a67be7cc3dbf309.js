"use strict";(self.webpackChunksala_juegos_llemos=self.webpackChunksala_juegos_llemos||[]).push([[121],{5121:(J,g,a)=>{a.r(g),a.d(g,{RegistroModule:()=>E});var m=a(6814),s=a(969),e=a(5879),r=a(95),d=a(8976),p=a(3519),c=a.n(p),f=a(3015),_=a(2759);const v=["swalError"];function h(n,i){1&n&&(e.ynx(0),e.TgZ(1,"small",18),e._uU(2,"Nombre requerido"),e.qZA(),e.BQk())}function b(n,i){1&n&&(e.ynx(0),e.TgZ(1,"small",18),e._uU(2,"Fomato de nombre inv\xe1lido"),e.qZA(),e.BQk())}function C(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"small",18),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("El nombre debe tener m\xednimo ",null==t.nombre?null:t.nombre.getError("minlength").requiredLength," caracteres")}}function x(n,i){if(1&n&&(e.ynx(0),e.YNc(1,h,3,0,"ng-container",7),e.YNc(2,b,3,0,"ng-container",7),e.YNc(3,C,3,1,"ng-container",7),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.nombre?null:t.nombre.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==t.nombre?null:t.nombre.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",null==t.nombre?null:t.nombre.hasError("minlength"))}}function Z(n,i){1&n&&(e.ynx(0),e.TgZ(1,"small",18),e._uU(2,"Email requerido"),e.qZA(),e.BQk())}function y(n,i){1&n&&(e.ynx(0),e.TgZ(1,"small",18),e._uU(2,"Fomato de email inv\xe1lido"),e.qZA(),e.BQk())}function T(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Z,3,0,"ng-container",7),e.YNc(2,y,3,0,"ng-container",7),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.mail?null:t.mail.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==t.mail?null:t.mail.hasError("email"))}}function I(n,i){1&n&&(e.ynx(0),e.TgZ(1,"small",18),e._uU(2,"Clave requerida"),e.qZA(),e.BQk())}function R(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"small",18),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("La clave debe tener m\xednimo ",null==t.clave?null:t.clave.getError("minlength").requiredLength," caracteres")}}function Q(n,i){if(1&n&&(e.ynx(0),e.YNc(1,I,3,0,"ng-container",7),e.YNc(2,R,3,1,"ng-container",7),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.clave?null:t.clave.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==t.clave?null:t.clave.hasError("minlength"))}}function F(n,i){1&n&&(e.ynx(0),e.TgZ(1,"small",18),e._uU(2,"Clave repetida requerida"),e.qZA(),e.BQk())}function N(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"small",18),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("La clave debe tener m\xednimo ",null==t.repiteClave?null:t.repiteClave.getError("minlength").requiredLength," caracteres")}}function w(n,i){if(1&n&&(e.ynx(0),e.YNc(1,F,3,0,"ng-container",7),e.YNc(2,N,3,1,"ng-container",7),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.repiteClave?null:t.repiteClave.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==t.repiteClave?null:t.repiteClave.hasError("minlength"))}}const U=[{path:"",component:(()=>{var n;class i{constructor(l,o,u){this.router=l,this.autenticacionService=o,this.usuariosService=u,this.nuevoId=""}ngOnInit(){this.regForm=new r.cw({nombre:new r.NI("",{validators:[r.kI.required,r.kI.minLength(4),r.kI.pattern("^[a-zA-Z]+$")],updateOn:"blur"}),mail:new r.NI("",{validators:[r.kI.required,r.kI.email],updateOn:"blur"}),clave:new r.NI("",{validators:[r.kI.required,r.kI.minLength(6)],updateOn:"blur"}),repiteClave:new r.NI("",{validators:[r.kI.required,r.kI.minLength(6)],updateOn:"blur"})})}get nombre(){return this.regForm.get("nombre")}get mail(){return this.regForm.get("mail")}get clave(){return this.regForm.get("clave")}get repiteClave(){return this.regForm.get("repiteClave")}registrarse(){this.regForm.valid?this.autenticacionService.guardar(this.regForm.get("mail")?.value,this.regForm.get("clave")?.value).then(l=>{this.nuevoId=l,this.usuariosService.setUsuario(new d.b(this.regForm.get("mail")?.value,this.regForm.get("clave")?.value,this.regForm.get("nombre")?.value),this.nuevoId).then(()=>{this.autenticacionService.login(this.regForm.get("mail")?.value,this.regForm.get("clave")?.value).then(()=>{this.usuariosService.updateLoginState(this.nuevoId),this.router.navigate([""])})})}).catch(l=>{"auth/email-already-in-use"==l.code?c().fire({icon:"error",title:"Usuario Existente!",html:"Ya existe un usuario registrado con ese email.<br>Por favor registrese con un email distinto."}):(console.log(l.code),c().fire({icon:"error",title:"Lo sentimos!",html:"Ocurri\xf3 un error inesperado.<br>Por favor comuniquese con soporte."}))}):(console.log(this.regForm.valid),console.log(this.nombre?.invalid),console.log(this.nombre?.dirty),console.log(this.nombre?.touched))}goToLogin(){this.router.navigateByUrl("login")}}return(n=i).\u0275fac=function(l){return new(l||n)(e.Y36(s.F0),e.Y36(f.T),e.Y36(_.J))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-registro"]],viewQuery:function(l,o){if(1&l&&e.Gf(v,5,e.SBq),2&l){let u;e.iGM(u=e.CRH())&&(o.swalError=u.first)}},decls:32,vars:5,consts:[[1,"text-center"],[1,"form-signin","w-100","m-auto"],[3,"formGroup","ngSubmit"],[1,"h3","mb-3","fw-normal","text-light"],[1,"form-floating"],["formControlName","nombre","type","text","id","floatingName","placeholder","Nombre",1,"form-control"],["for","floatingName"],[4,"ngIf"],[1,"form-floating","mt-2"],["formControlName","mail","type","email","id","floatingInput","placeholder","nombre@mail.com",1,"form-control"],["for","floatingInput"],["formControlName","clave","type","password","id","floatingPassword","placeholder","Contrase\xf1a",1,"form-control","m-0","rounded-0"],["for","floatingPassword"],["formControlName","repiteClave","type","password","id","floatingPassword2","placeholder","Contrase\xf1a",1,"form-control"],["for","floatingPassword2"],["type","submit",1,"w-100","btn","btn-lg","btn-primary"],[1,"text-secondary"],["type","submit",1,"w-100","btn","btn-lg","btn-secondary",3,"click"],[1,"text-danger"]],template:function(l,o){1&l&&(e.TgZ(0,"body",0)(1,"main",1)(2,"form",2),e.NdJ("ngSubmit",function(){return o.registrarse()}),e.TgZ(3,"h1",3),e._uU(4,"Registro de Usuario"),e.qZA(),e.TgZ(5,"div",4),e._UZ(6,"input",5),e.TgZ(7,"label",6),e._uU(8,"Nombre"),e.qZA()(),e.YNc(9,x,4,3,"ng-container",7),e.TgZ(10,"div",8),e._UZ(11,"input",9),e.TgZ(12,"label",10),e._uU(13,"Email"),e.qZA()(),e.YNc(14,T,3,2,"ng-container",7),e.TgZ(15,"div",4),e._UZ(16,"input",11),e.TgZ(17,"label",12),e._uU(18,"Contrase\xf1a"),e.qZA()(),e.YNc(19,Q,3,2,"ng-container",7),e.TgZ(20,"div",4),e._UZ(21,"input",13),e.TgZ(22,"label",14),e._uU(23,"Repetir Contrase\xf1a"),e.qZA()(),e.YNc(24,w,3,2,"ng-container",7),e.TgZ(25,"button",15),e._uU(26,"Registrarme"),e.qZA()(),e._UZ(27,"hr"),e.TgZ(28,"h6",16),e._uU(29," \xbfYa est\xe1s registrado? "),e.qZA(),e.TgZ(30,"button",17),e.NdJ("click",function(){return o.goToLogin()}),e._uU(31,"Iniciar Sesi\xf3n"),e.qZA()()()),2&l&&(e.xp6(2),e.Q6J("formGroup",o.regForm),e.xp6(7),e.Q6J("ngIf",(null==o.nombre?null:o.nombre.invalid)&&((null==o.nombre?null:o.nombre.dirty)||(null==o.nombre?null:o.nombre.touched))),e.xp6(5),e.Q6J("ngIf",(null==o.mail?null:o.mail.invalid)&&((null==o.mail?null:o.mail.dirty)||(null==o.mail?null:o.mail.touched))),e.xp6(5),e.Q6J("ngIf",(null==o.clave?null:o.clave.invalid)&&((null==o.clave?null:o.clave.dirty)||(null==o.clave?null:o.clave.touched))),e.xp6(5),e.Q6J("ngIf",(null==o.repiteClave?null:o.repiteClave.invalid)&&((null==o.repiteClave?null:o.repiteClave.dirty)||(null==o.repiteClave?null:o.repiteClave.touched))))},dependencies:[m.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:transparent}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}"]}),i})()}];let q=(()=>{var n;class i{}return(n=i).\u0275fac=function(l){return new(l||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[s.Bz.forChild(U),s.Bz]}),i})(),E=(()=>{var n;class i{}return(n=i).\u0275fac=function(l){return new(l||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,q,r.UX]}),i})()}}]);