"use strict";(self.webpackChunksala_juegos_llemos=self.webpackChunksala_juegos_llemos||[]).push([[592],{8976:(j,S,t)=>{t.d(S,{b:()=>P});class P{constructor(d,A,I){this.mail=d,this.password=A,this.nombre=I,this.fechaAcceso=Date.now(),this.id=""}}},3015:(j,S,t)=>{t.d(S,{T:()=>nt});var P=t(5861),s=t(5879),d=t(8645),A=t(2096),I=t(5592),L=t(2459),p=t(3019),y=t(3093),c=t(4664),r=t(7398),g=t(4552);class E extends d.x{constructor(i=1/0,u=1/0,n=g.l){super(),this._bufferSize=i,this._windowTime=u,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=u===1/0,this._bufferSize=Math.max(1,i),this._windowTime=Math.max(1,u)}next(i){const{isStopped:u,_buffer:n,_infiniteTimeWindow:l,_timestampProvider:o,_windowTime:a}=this;u||(n.push(i),!l&&n.push(o.now()+a)),this._trimBuffer(),super.next(i)}_subscribe(i){this._throwIfClosed(),this._trimBuffer();const u=this._innerSubscribe(i),{_infiniteTimeWindow:n,_buffer:l}=this,o=l.slice();for(let a=0;a<o.length&&!i.closed;a+=n?1:2)i.next(o[a]);return this._checkFinalizedStatuses(i),u}_trimBuffer(){const{_bufferSize:i,_timestampProvider:u,_buffer:n,_infiniteTimeWindow:l}=this,o=(l?1:2)*i;if(i<1/0&&o<n.length&&n.splice(0,n.length-o),!l){const a=u.now();let m=0;for(let f=1;f<n.length&&n[f]<=a;f+=2)m=f;m&&n.splice(0,m+1)}}}var M=t(3020);function T(e,i,u){let n,l=!1;return e&&"object"==typeof e?({bufferSize:n=1/0,windowTime:i=1/0,refCount:l=!1,scheduler:u}=e):n=e??1/0,(0,M.B)({connector:()=>new E(n,i,u),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}var K=t(1374),Q=t(4674);function b(e,i){return(0,Q.m)(i)?(0,c.w)(()=>e,i):(0,c.w)(()=>e)}var O=t(5137),Z=t(2181),N=t(2793),R=t(6304),V=t(6814),Y=t(2194);t(120);const X=new s.OlP("angularfire2.auth.use-emulator"),H=new s.OlP("angularfire2.auth.settings"),z=new s.OlP("angularfire2.auth.tenant-id"),k=new s.OlP("angularfire2.auth.langugage-code"),_=new s.OlP("angularfire2.auth.use-device-language"),q=new s.OlP("angularfire.auth.persistence");let B=(()=>{class e{constructor(u,n,l,o,a,m,f,W,w,et,it,ut){const J=new d.x,C=(0,A.of)(void 0).pipe((0,y.Q)(a.outsideAngular),(0,c.w)(()=>o.runOutsideAngular(()=>t.e(661).then(t.bind(t,8661)))),(0,r.U)(()=>(0,R.on)(u,o,n)),(0,r.U)(U=>((e,i,u,n,l,o,a,m)=>(0,R.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const f=i.runOutsideAngular(()=>e.auth());if(u&&f.useEmulator(...u),n&&(f.tenantId=n),f.languageCode=l,o&&f.useDeviceLanguage(),a)for(const[W,w]of Object.entries(a))f.settings[W]=w;return m&&f.setPersistence(m),f},[u,n,l,o,a,m]))(U,o,m,W,w,et,f,it)),T({bufferSize:1,refCount:!1}));if((0,V.PM)(l))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,A.of)(null);else{C.pipe((0,K.P)()).subscribe();const D=C.pipe((0,c.w)(h=>h.getRedirectResult().then(v=>v,()=>null)),N.iC,T({bufferSize:1,refCount:!1})),G=C.pipe((0,c.w)(h=>new I.y(v=>({unsubscribe:o.runOutsideAngular(()=>h.onAuthStateChanged(F=>v.next(F),F=>v.error(F),()=>v.complete()))})))),x=C.pipe((0,c.w)(h=>new I.y(v=>({unsubscribe:o.runOutsideAngular(()=>h.onIdTokenChanged(F=>v.next(F),F=>v.error(F),()=>v.complete()))}))));this.authState=D.pipe(b(G),(0,O.R)(a.outsideAngular),(0,y.Q)(a.insideAngular)),this.user=D.pipe(b(x),(0,O.R)(a.outsideAngular),(0,y.Q)(a.insideAngular)),this.idToken=this.user.pipe((0,c.w)(h=>h?(0,L.D)(h.getIdToken()):(0,A.of)(null))),this.idTokenResult=this.user.pipe((0,c.w)(h=>h?(0,L.D)(h.getIdTokenResult()):(0,A.of)(null))),this.credential=(0,p.T)(D,J,this.authState.pipe((0,Z.h)(h=>!h))).pipe((0,r.U)(h=>h?.user?h:null),(0,O.R)(a.outsideAngular),(0,y.Q)(a.insideAngular))}return(0,R.pX)(this,C,o,{spy:{apply:(U,D,G)=>{(U.startsWith("signIn")||U.startsWith("createUser"))&&G.then(x=>J.next(x))}}})}}return e.\u0275fac=function(u){return new(u||e)(s.LFG(R.Dh),s.LFG(R.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(N.HU),s.LFG(X,8),s.LFG(H,8),s.LFG(z,8),s.LFG(k,8),s.LFG(_,8),s.LFG(q,8),s.LFG(Y.nm,8))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),nt=(()=>{var e;class i{constructor(n){this.auth=n}login(n,l){return this.auth.signInWithEmailAndPassword(n,l)}logout(){return this.auth.signOut()}guardar(n,l){var o=this;return(0,P.Z)(function*(){return(yield o.auth.createUserWithEmailAndPassword(n,l)).user?.uid})()}}return(e=i).\u0275fac=function(n){return new(n||e)(s.LFG(B))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),i})()},2759:(j,S,t)=>{t.d(S,{J:()=>L});var P=t(5861),s=t(8976),d=t(938),A=t(5619),I=t(5879);let L=(()=>{var p;class y{constructor(r){this.firestore=r,this.loginState=new A.X(""),this.currentLoginState=this.loginState.asObservable(),this.usuariosRef=(0,d.hJ)(this.firestore,"usuarios")}updateLoginState(r){this.loginState.next(r)}addUsuario(r){return(0,d.ET)(this.usuariosRef,r)}setUsuario(r,g){var E=this;return(0,P.Z)(function*(){const M=(0,d.JU)(E.usuariosRef,g);return r.id=g,(0,d.pl)(M,{...r})})()}getUsuarios(){return(0,d.BS)(this.usuariosRef,{idField:"id"})}traerSubscripcion(){return this.getUsuarios().subscribe(r=>{console.log(r)})}getUsuario(r){var g=this;return(0,P.Z)(function*(){var E=new Document;return(yield(0,d.PL)(g.usuariosRef)).forEach(T=>{T.id==r&&(E=T.data())}),new s.b(E.mail,E.password,E.nombre)})()}updUsuario(r){const g=(0,d.JU)(this.firestore,`usuarios/${r.mail}`);return(0,d.r7)(g,{...r})}delUsuario(r){const g=(0,d.JU)(this.firestore,`usuarios/${r}`);return(0,d.oe)(g)}}return(p=y).\u0275fac=function(r){return new(r||p)(I.LFG(d.gg))},p.\u0275prov=I.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),y})()}}]);